"use strict";(self.webpackChunkag_curl=self.webpackChunkag_curl||[]).push([[576],{1576:(j,h,m)=>{m.r(h),m.d(h,{SimulatorModule:()=>F});var b=m(9808),p=m(4716),O=m(1135),A=m(2076),C=m(4464);class c{constructor(o){this.teamData={},o.forEach(e=>{e.homeTeamAbbr in this.teamData||(this.teamData[e.homeTeamAbbr]={score:0,round:0}),e.awayTeamAbbr in this.teamData||(this.teamData[e.awayTeamAbbr]={score:0,round:0}),this.teamData[e.homeTeamAbbr].score+=e.homeAwardedPoints,this.teamData[e.homeTeamAbbr].round=Math.max(this.teamData[e.homeTeamAbbr].round,e.round),this.teamData[e.awayTeamAbbr].score+=e.awayAwardedPoints,this.teamData[e.awayTeamAbbr].round=Math.max(this.teamData[e.awayTeamAbbr].round,e.round)})}add(o){for(const[e,a]of Object.entries(o.teamData))this.teamData[e].round+=a.round,this.teamData[e].score+=a.score;return this}divide(o){for(const e of Object.keys(this.teamData))this.teamData[e].round/=o,this.teamData[e].score/=o;return this}raw(){const o=[];for(const[e,a]of Object.entries(this.teamData))o.push({abbr:e,score:a.score,round:a.round});return o.sort((e,a)=>a.score-e.score)}static blank(o){const e=new c([]);return o.all().forEach(a=>{a.rank>0&&(e.teamData[a.abbr]={score:0,round:0})}),e}}var t=m(1223),M=m(9669),w=m(9771),T=m(8335),P=m(8526),g=m(5560);function D(r,o){if(1&r&&(t.TgZ(0,"mat-grid-list",3),t.TgZ(1,"mat-grid-tile",4),t.TgZ(2,"div",5),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"mat-grid-tile",4),t.TgZ(5,"div",5),t._uU(6),t.qZA(),t.qZA(),t.qZA()),2&r){const e=o.$implicit;t.xp6(3),t.Oqu(e[0]),t.xp6(3),t.hij("",e[1],"%")}}function v(r,o){if(1&r&&(t.TgZ(0,"mat-grid-list",6),t.TgZ(1,"mat-grid-tile",4),t.TgZ(2,"div",5),t._UZ(3,"img",7),t._uU(4),t.qZA(),t.qZA(),t.TgZ(5,"mat-grid-tile",4),t.TgZ(6,"div",5),t._uU(7),t.qZA(),t.qZA(),t.TgZ(8,"mat-grid-tile",4),t.TgZ(9,"div",5),t._uU(10),t.qZA(),t.qZA(),t.qZA()),2&r){const e=o.$implicit,a=t.oxw();t.xp6(3),t.s9C("src",a.teamdb.get(e.abbr).imgURL,t.LSH),t.xp6(1),t.Oqu(a.teamdb.get(e.abbr).cleanName()),t.xp6(3),t.Oqu(e.score.toFixed(3)),t.xp6(3),t.Oqu(e.round.toFixed(2))}}function y(r,o){r.forEach(a=>{a.group&&(o[a.group][a.homeTeamAbbr].score+=a.homeAwardedPoints,o[a.group][a.homeTeamAbbr].simulations.push(a),o[a.group][a.awayTeamAbbr].score+=a.homeAwardedPoints,o[a.group][a.awayTeamAbbr].simulations.push(a))});const e={};for(const[a,s]of Object.entries(o)){a in e||(e[a]=[]);for(const[n,d]of Object.entries(s))e[a].push({abbr:n,logOdds:d.logOdds});e[a].sort((n,d)=>{const f=s[n.abbr],i=s[d.abbr];if(f.score===i.score){const l=f.simulations.filter(x=>x.homeTeamAbbr===d.abbr||x.awayTeamAbbr===d.abbr);if(0===l.length)return Math.random()-.5;const u=l[0];return u.homeAwardedPoints===u.awayAwardedPoints?Math.random()-.5:u.winnerTeamAbbr===n.abbr?-1:1}return i.score-f.score})}return e}const Z=[{path:"",component:(()=>{class r{constructor(e,a,s,n){this.fifaapi=e,this.teamdb=a,this.userdb=s,this.draftdb=n}ngOnInit(){this.allGamesSub$=new O.X(new Array),this.allGames$=this.allGamesSub$.asObservable(),this.allDrafts$=(0,A.D)([this.draftdb.drafts]),this.updateGames().then(e=>{e.sort((s,n)=>s.id-n.id),this.metaResult=c.blank(this.teamdb),this.metaDraft={},this.userdb.all().forEach(s=>{this.metaDraft[s.name]=[0,0,0,0,0,0,0,0]});for(let s=0;s<5e4;s++){this.draftdb.mockDraft();const n=[];e.forEach(i=>i.initalizeFromResult()),this.teamdb.all().forEach(i=>i.resetGames()),e.filter(i=>0===i.round).forEach(i=>{i.complete||n.push(i.simulate(!0,n))});const d=y(n,this.teamdb.teamsByGroup());e.filter(i=>i.round>0).forEach(i=>{n.push(i.simulate(!0,n,d))}),this.metaResult.add(new c(n)),this.draftdb.drafts.sort((i,l)=>l.score()-i.score()).forEach((i,l)=>this.metaDraft[i.user.name][l]++)}this.metaResult.divide(5e4),this.metaDraftSorted=[];for(const[s,n]of Object.entries(this.metaDraft))this.metaDraftSorted.push([s,n[0]/500]);this.metaDraftSorted.sort((s,n)=>Number(n[1])-Number(s[1])),this.allGamesSub$.next(e.filter(s=>s.round>=0))})}updateGames(){return(0,C.n)(this.fifaapi.getGames())}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(M.d),t.Y36(w.Y),t.Y36(T.C),t.Y36(P.H))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-simulator"]],decls:4,vars:2,consts:[[1,"list-container"],["cols","2","rowHeight","2em",4,"ngFor","ngForOf"],["cols","3","rowHeight","2em",4,"ngFor","ngForOf"],["cols","2","rowHeight","2em"],["colspan","1"],[1,"game-status"],["cols","3","rowHeight","2em"],[1,"team-img",3,"src"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t.YNc(1,D,7,2,"mat-grid-list",1),t.qZA(),t.TgZ(2,"div",0),t.YNc(3,v,11,4,"mat-grid-list",2),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",a.metaDraftSorted),t.xp6(2),t.Q6J("ngForOf",a.metaResult.raw()))},directives:[b.sg,g.Il,g.DX],styles:["h1[_ngcontent-%COMP%]{color:#fff;font-size:50px;font-weight:bolder}h2[_ngcontent-%COMP%]{color:#fff;font-size:20px;margin-bottom:0}h3[_ngcontent-%COMP%]{color:#fff;font-size:15px;margin-bottom:0}a[_ngcontent-%COMP%]{color:#5eccd6;border-bottom:2px solid transparent;transition:.5s border-bottom}.dashboard-header[_ngcontent-%COMP%]{align-items:center;box-sizing:border-box;display:flex;flex-direction:column;padding-top:1%}.dashboard-content[_ngcontent-%COMP%]{display:block;margin-top:10px}.game-flex-item[_ngcontent-%COMP%]{flex-grow:5;margin-right:10px}.pick-flex-item[_ngcontent-%COMP%]{flex-grow:4;margin-right:10px}.score-flex-item[_ngcontent-%COMP%]{flex-grow:1}.flexExpand[_ngcontent-%COMP%]{flex:1 1 auto}@media (max-width: 768px){.dashboard-content[_ngcontent-%COMP%]{display:block}.game-flex-item[_ngcontent-%COMP%], .pick-flex-item[_ngcontent-%COMP%]{margin-right:0}}.week-selector[_ngcontent-%COMP%]{margin-top:5px;background-color:#fff;width:min-content;height:51px}.list-container[_ngcontent-%COMP%]{margin-bottom:8px}.mat-grid-list[_ngcontent-%COMP%]{max-width:400px}.mat-grid-tile[_ngcontent-%COMP%]{border-width:1px;border-style:solid;border-color:#1e1e1e;background-color:#464646}.team-name[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;height:100%}.game-status[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;height:100%;color:#fff;padding-left:3px}.game-status-mini[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;height:100%;border-left:1px;border-style:solid;border-color:#1e1e1e;padding-left:3px;font-size:.6em}.team-img[_ngcontent-%COMP%]{font-weight:700;padding-left:2px;padding-right:2px;max-height:1.5em}.team-img-mini[_ngcontent-%COMP%]{padding-left:5px;padding-right:5px;max-height:1em}.tie[_ngcontent-%COMP%]{color:#dcdc28}.win[_ngcontent-%COMP%]{color:#5fff5f}.lose[_ngcontent-%COMP%]{color:#ff5f5f}.no-contest[_ngcontent-%COMP%]{color:#fff}"]}),r})()}];let S=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[p.Bz.forChild(Z)],p.Bz]}),r})(),F=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[b.ez,S,g.N6]]}),r})()}}]);