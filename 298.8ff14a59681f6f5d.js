"use strict";(self.webpackChunkag_curl=self.webpackChunkag_curl||[]).push([[298],{2298:(G,h,i)=>{i.r(h),i.d(h,{DashboardModule:()=>U});var r=i(9808),u=i(4716),d=i(1135),x=i(2076),Z=i(4464),t=i(1223),C=i(9669),b=i(8526),v=i(8335);function w(o,s){if(1&o&&(t.TgZ(0,"div",2),t.TgZ(1,"div"),t.TgZ(2,"h3"),t._uU(3),t.qZA(),t.qZA(),t._UZ(4,"span",3),t.TgZ(5,"div"),t.TgZ(6,"h3"),t._uU(7),t.qZA(),t.qZA(),t.qZA()),2&o){const e=s.$implicit;t.xp6(3),t.hij("",e[0],":"),t.xp6(4),t.lnq("",e[1][0]," / ",e[1][1]," [",e[1][2],"]")}}let M=(()=>{class o{constructor(e,n){this.userdb=e,this.draftdb=n,this.drafts=[],this.games=[],this.scores={}}ngOnInit(){const e=[];for(const n of this.userdb.all())this.scores[n.name]=[0,0,"0"],e.push([n.name,[0,0,"0"]]);this.scoreSubject$=new d.X(e),this.scores$=this.scoreSubject$.asObservable(),this.drafts$.subscribe(n=>{this.drafts=n,this.updateScore()}),this.games$.subscribe(n=>{this.games=n,this.updateScore()})}updateScore(){for(const n of this.userdb.all()){let l=0,a=0,c=0;const L=this.draftdb.getDraftByUser(n.name);for(const g of L.teams)for(const f of this.games.filter(m=>m.home.abbr===g.abbr||m.away.abbr===g.abbr)){f.complete&&a++;let m=f.getAwardedPoints(g.abbr);m>0&&(c+=f.getAwardedPoints(g.abbr)),m>1&&(l+=1)}this.scores[n.name]=[c,a,a>0?(l/a).toFixed(3):".000"]}const e=[];for(const[n,l]of Object.entries(this.scores).sort((a,c)=>a[1][0]===c[1][0]?a[0].localeCompare(c[0]):c[1][0]-a[1][0]))e.push([n,l]);this.scoreSubject$.next(e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(v.C),t.Y36(b.H))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-score-list"]],inputs:{drafts$:"drafts$",games$:"games$"},decls:3,vars:3,consts:[[1,"score"],["class","score-content",4,"ngFor","ngForOf"],[1,"score-content"],[1,"flexExpand"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,w,8,4,"div",1),t.ALo(2,"async"),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,n.scores$)))},directives:[r.sg],pipes:[r.Ov],styles:["h3[_ngcontent-%COMP%]{color:#fff;font-size:18px;margin-bottom:0;margin-left:10px;background-color:inherit}.flexExpand[_ngcontent-%COMP%]{flex:1 1 auto}.score-content[_ngcontent-%COMP%]{display:flex}.score[_ngcontent-%COMP%]{max-width:250px}"]}),o})(),O=(()=>{class o{constructor(){this.isMobileResolution=window.innerWidth<=768,this.ismobileResolution$=new d.X(this.isMobileResolution)}getIsMobileResolution(){return this.isMobileResolution}watchIsMobileResolution(){return this.ismobileResolution$.asObservable()}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var p=i(5560);function A(o,s){if(1&o&&(t.TgZ(0,"mat-grid-list",4),t.TgZ(1,"mat-grid-tile",5),t.TgZ(2,"div",6),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"mat-grid-tile",7),t.TgZ(5,"div",8),t._UZ(6,"img",9),t._uU(7),t.qZA(),t.qZA(),t.TgZ(8,"mat-grid-tile",7),t.TgZ(9,"div",8),t._UZ(10,"img",9),t._uU(11),t.qZA(),t.qZA(),t.TgZ(12,"mat-grid-tile",10),t.TgZ(13,"div",6),t._uU(14),t.qZA(),t.qZA(),t.qZA()),2&o){const e=s.$implicit;t.xp6(3),t.hij(" ",e.roundStr()," "),t.xp6(1),t.Q6J("ngClass",e.complete?e.tie()?"tie":e.winner().abbr===e.away.abbr?"win":"lose":"no-contest"),t.xp6(2),t.s9C("src",e.away.imgURL,t.LSH),t.xp6(1),t.lnq(" ",e.away.rank>0?e.away.rank.toString()+". ":"","",e.away.cleanName()," ",e.awayUser.full()," "),t.xp6(1),t.Q6J("ngClass",e.complete?e.tie()?"tie":e.winner().abbr===e.home.abbr?"win":"lose":"no-contest"),t.xp6(2),t.s9C("src",e.home.imgURL,t.LSH),t.xp6(1),t.lnq(" ",e.home.rank>0?e.home.rank.toString()+". ":"","",e.home.cleanName()," ",e.homeUser.full()," "),t.xp6(3),t.hij(" ",e.status()," ")}}function _(o,s){if(1&o&&(t.TgZ(0,"div"),t.TgZ(1,"div",2),t.YNc(2,A,15,12,"mat-grid-list",3),t.qZA(),t.qZA()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.games)}}function y(o,s){if(1&o&&(t.TgZ(0,"mat-grid-list",12),t.TgZ(1,"mat-grid-tile",7),t.TgZ(2,"div",8),t._UZ(3,"img",13),t._uU(4),t.qZA(),t.qZA(),t.TgZ(5,"mat-grid-tile",7),t.TgZ(6,"div",8),t._UZ(7,"img",13),t._uU(8),t.qZA(),t.qZA(),t.TgZ(9,"mat-grid-tile",10),t.TgZ(10,"div",6),t._uU(11),t._UZ(12,"br"),t._uU(13),t.qZA(),t.qZA(),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.Q6J("ngClass",e.complete?e.tie()?"tie":e.winner().abbr===e.away.abbr?"win":"lose":"no-contest"),t.xp6(2),t.s9C("src",e.away.imgURL,t.LSH),t.xp6(1),t.AsE(" ",e.away.abbr," ",e.awayUser.abbr()," "),t.xp6(1),t.Q6J("ngClass",e.complete?e.tie()?"tie":e.winner().abbr===e.home.abbr?"win":"lose":"no-contest"),t.xp6(2),t.s9C("src",e.home.imgURL,t.LSH),t.xp6(1),t.AsE(" ",e.home.abbr," ",e.homeUser.abbr()," "),t.xp6(3),t.hij(" ",e.miniStatusTop()," "),t.xp6(2),t.hij(" ",e.miniStatusBottom()," ")}}function S(o,s){if(1&o&&(t.TgZ(0,"div",2),t.YNc(1,y,14,10,"mat-grid-list",11),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.games)}}let T=(()=>{class o{constructor(e){this.appState=e,this.games=[],this.isMobile=e.getIsMobileResolution()}ngOnInit(){this.games$.subscribe(e=>{0===this.games.length&&(this.games=e);for(let n=0;n<e.length;n++)this.games[n].compare(e[n])||(this.games[n]=e[n])})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(O))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-game-list"]],inputs:{games$:"games$"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["mobile",""],[1,"list-container"],["cols","19","rowHeight","3em",4,"ngFor","ngForOf"],["cols","19","rowHeight","3em"],["colspan","1"],[1,"game-status"],["colspan","5",3,"ngClass"],[1,"team-name"],[1,"team-img",3,"src"],["colspan","8"],["cols","18","rowHeight","3em",4,"ngFor","ngForOf"],["cols","18","rowHeight","3em"],[1,"team-img-mini",3,"src"]],template:function(e,n){if(1&e&&(t.YNc(0,_,3,1,"div",0),t.YNc(1,S,2,1,"ng-template",null,1,t.W1O)),2&e){const l=t.MAs(2);t.Q6J("ngIf",!n.isMobile)("ngIfElse",l)}},directives:[r.O5,r.sg,p.Il,p.DX,r.mk],styles:[".mat-grid-list[_ngcontent-%COMP%]{max-width:900px}.mat-grid-tile[_ngcontent-%COMP%]{border-width:1px;border-style:solid;border-color:#1e1e1e;background-color:#464646}.team-name[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;height:100%}.game-status[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;height:100%;color:#fff;padding-left:3px}.game-status-mini[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;height:100%;border-left:1px;border-style:solid;border-color:#1e1e1e;padding-left:3px;font-size:.6em}.team-img[_ngcontent-%COMP%]{font-weight:700;padding-left:5px;padding-right:5px}.team-img-mini[_ngcontent-%COMP%]{padding-left:5px;padding-right:5px;max-height:1.5em}.tie[_ngcontent-%COMP%]{color:#dcdc28}.win[_ngcontent-%COMP%]{color:#5fff5f}.lose[_ngcontent-%COMP%]{color:#ff5f5f}.no-contest[_ngcontent-%COMP%]{color:#fff}"]}),o})();const $=[{path:"",component:(()=>{class o{constructor(e,n){this.fifaapi=e,this.draftdb=n}ngOnDestroy(){console.log("Shutting down dashboard update"),clearInterval(this.updateInterval)}ngOnInit(){this.allGamesSub$=new d.X(new Array),this.allGames$=this.allGamesSub$.asObservable(),this.allDrafts$=(0,x.D)([this.draftdb.drafts]),this.updateGames().then(e=>{this.allGamesSub$.next(e.filter(n=>n.round>=0))}),this.updateInterval=setInterval(()=>{this.updateGames().then(e=>{this.allGamesSub$.next(e.filter(n=>n.round>=0))})},2e4)}updateGames(){return(0,Z.n)(this.fifaapi.getGames())}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(C.d),t.Y36(b.H))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-dashboard"]],decls:5,vars:3,consts:[[1,"dashboard-content"],[1,"score-flex-item"],[3,"drafts$","games$"],[1,"game-flex-item"],[1,"flex-item",3,"games$"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._UZ(2,"app-score-list",2),t.qZA(),t.TgZ(3,"div",3),t._UZ(4,"app-game-list",4),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("drafts$",n.allDrafts$)("games$",n.allGames$),t.xp6(2),t.Q6J("games$",n.allGames$))},directives:[M,T],styles:["h1[_ngcontent-%COMP%]{color:#fff;font-size:50px;font-weight:bolder}h2[_ngcontent-%COMP%]{color:#fff;font-size:20px;margin-bottom:0}h3[_ngcontent-%COMP%]{color:#fff;font-size:15px;margin-bottom:0}a[_ngcontent-%COMP%]{color:#5eccd6;border-bottom:2px solid transparent;transition:.5s border-bottom}.dashboard-header[_ngcontent-%COMP%]{align-items:center;box-sizing:border-box;display:flex;flex-direction:column;padding-top:1%}.dashboard-content[_ngcontent-%COMP%]{display:block;margin-top:10px}.game-flex-item[_ngcontent-%COMP%]{flex-grow:5;margin-right:10px}.pick-flex-item[_ngcontent-%COMP%]{flex-grow:4;margin-right:10px}.score-flex-item[_ngcontent-%COMP%]{flex-grow:1}.flexExpand[_ngcontent-%COMP%]{flex:1 1 auto}@media (max-width: 768px){.dashboard-content[_ngcontent-%COMP%]{display:block}.game-flex-item[_ngcontent-%COMP%], .pick-flex-item[_ngcontent-%COMP%]{margin-right:0}}.week-selector[_ngcontent-%COMP%]{margin-top:5px;background-color:#fff;width:min-content;height:51px}"]}),o})()}];let P=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[u.Bz.forChild($)],u.Bz]}),o})(),U=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[r.ez,P,p.N6]]}),o})()}}]);